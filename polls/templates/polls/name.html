{% extends 'polls/base.html' %}
{% load staticfiles %}
{% block main %}


<form id="myForm" enctype="multipart/form-data" method="POST" action="">
    {{ form.errors }}
    {% csrf_token %}
    <div class="row">
        <div class="col s12 m10 110">
            <!-- badges -->
            <div id='mesh_header' class="section scrollspy">
                <div class="row">
                    <div class="col s12">
                        <h2 class="header">Mesh</h2>
                        <p> Select your mesh </p>
                            
                            {{ form.mesh }}
                            
                            
                    </div>
                </div>
            </div>
            <div id="boundaries" class="section scrollspy">
                <div class="row">
                    <div class="col s12">
                        <h2 class="header">Boundary Conditions</h2>
                        <p> Apply boundary conditions </p>
                        
                        {{ form.analysisType }}
                        
                        <table id='boundary'>
                            <thead>
                				<tr>
                                	<th>Physical group</th>
	                                <th>BC Type</th>
                                    <th colspan='3'>Coordinates (x, y, z)</th>
                                    <th>Time</th>
        	                        <th></th>
                				</tr>
                            </thead>
                            <tbody>
                                {% for subform in formset.forms %}
                                
				<tr class="formset dynamic-form" id='form-{{ subform.prefix }}-row'>
                                    <td style="width:30%;">{{ subform.physicalGroup }}{{ subform.id }}</td>
                                    <td>{{ subform.boundaryType }}</td>
                                    <td style="width:60px">{{ subform.xcoord }}</td>
                                    <td style="width:60px">{{ subform.ycoord }}</td>
                                    <td style="width:60px">{{ subform.zcoord }}</td>
                                    <td style="width:60px">{{ subform.time }}</td>
                                    <td></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        
                        {{ formset.management_form }}
                        
                    </div>
                </div>
            </div>
            <div id="materials" class="section scrollspy">
                <div class="row">
                    <div class="col s12">
                        <h2 class="header">Materials</h2>
                        <p> Choose your material:</p>
                        
                        {{ materialsForm.materialChoice }}
                    
                    </div>
                </div>
            </div>
            <div id="analysis" class="section scrollspy">
                <div class="row">
                    <div class="col s12">
                        <h2 class="header">Analysis & Equation </h2>
                        <p> Select your analysis </p>
                    </div>
                </div>
            </div>
            <div id="simulation" class="section scrollspy">
                <div class="row">
                    <div class="col s12">
                        <h2 class="header">Simulation</h2>
                        <p> Some button to run the simulation</p>
                        <button class="btn waves-effect waves-light" type="submit" name="action">
                            Solve!
                            <i class="material-icons right">send</i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- end badges -->
        
        <!-- section thingy on the side -->
        <div class="col hide-on-small-only m3 12">
            <div class="toc-wrapper" style="top: 50px; position:fixed; right:100px;">
                    <ul class="section table-of-contents">
                        <li>
                            <a href='#mesh_header'>Mesh</a>
                        </li>
                        <li>
                            <a href="#boundaries">Boundary Conditions</a>
                        </li>
                        <li>
                            <a href="#materials">Materials</a>
                        </li>
                        <li>
                            <a href="#analysis">Analysis</a>
                        </li>
                        <li>
                            <a href="#simulation">Simulation</a>
                        </li>
                    </ul>
            </div>
            
        </div>
    </div>
<input type="submit">
</form>

<script type="text/javascript" src="{% static 'materialize/bin/materialize.js' %}"></script>

<script type="text/javascript">
       	$('.scrollspy').scrollSpy();
</script>

<script>
$(document).ready(function(){
   //$(function() {
        $('#myForm table#boundary tbody tr').formset({
            addText: '<a class="waves-effect waves-light btn">Add</a>',
            added: function() {
		    $('table#boundary select').removeAttr('data-activates')
                    $('table#boundary select').each(function() {
                        $(this).material_select();
                    });
		},
        });
    //});
});
</script>




{% endblock %}
